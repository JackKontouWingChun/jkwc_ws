<!DOCTYPE html>
<html lang="en">

{% include head.html %}

<body id="page-top" data-spy="scroll" data-target=".navbar-fixed-top">

	{% include navbar.html %} {{ content }}

	<!-- Footer -->
	{% include footer.html %}
	<script>
		const galleriesData = [
			{
				folder: 'Bodybuilding',
				tag: 'bodybuidling'
			},
			{
				folder: 'Wooden Dummy',
				tag: 'woodendummy'
			},
			{
				folder: 'GM Victor Kan',
				tag: 'gmvk'
			},
			{
				folder: 'Magazine articles',
				tag: 'articles'
			},
			{
				folder: 'Misc',
				tag: 'misc'
			},
			{
				folder: 'Seminars',
				tag: 'seminars'
			},
			{
				folder: 'JKWC Junior class',
				tag: 'juniorclass'
			},
		];

		function cbSuccess(hrefs, folder, tag) {
			$(`ul.gallery_${tag}.row.list-unstyled`).before(`<h2>${folder}</h2>`);

			hrefs.forEach(href => (
				$(`ul.gallery_${tag}.row.list-unstyled`)
					.append(`<li id="showreelthumb" class="col-xs-6 col-sm-3"><a class="post-link" href="${href}" data-imagelightbox="a"><div class="img-post img-post-portfolio" style="background-image: url(${href});"></div></a></li>`)));
		}

		galleriesData.forEach(({ folder, tag }) => {
			fetch(`https://jkwcweb.sirv.com/Images/${folder}`)
				.then(res => res.text())
				.then(html => {
					debugger;
					const hrefs = html.match(/(?:href=)"([^"]*")/ig)
					return hrefs.map(c => encodeURI(`https:${eval(c)}`));
				})
				.then(uris => cbSuccess(uris, folder, tag));
		})



	</script>
</body>

</html>